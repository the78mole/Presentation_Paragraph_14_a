# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      # General checks
      - id: trailing-whitespace
        exclude: '\.bbl$'
      - id: end-of-file-fixer
        exclude: '\.pdf$|\.bbl$'
      - id: check-yaml
      - id: check-json
      - id: check-added-large-files
        args: ["--maxkb=10000"]
      - id: check-case-conflict
      - id: check-merge-conflict
      - id: mixed-line-ending

  # Shell script checks
  - repo: https://github.com/shellcheck-py/shellcheck-py
    rev: v0.10.0.1
    hooks:
      - id: shellcheck
        args: ["-x"]

  # Markdown formatting
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8
    hooks:
      - id: prettier
        types_or: [markdown, yaml, json]
        exclude: '\.bbl$'

  # LaTeX specific checks
  - repo: https://github.com/cmhughes/latexindent.pl
    rev: V3.24.4
    hooks:
      - id: latexindent
        args: ["-s", "-w", "-m", "-l"]
        types: [tex]
        exclude: '\.bbl$|\.aux$|\.log$|\.out$|\.toc$|\.nav$|\.snm$'

  # Check for common LaTeX mistakes
  - repo: https://github.com/jonasbb/pre-commit-latex-hooks
    rev: v1.5.0
    hooks:
      - id: american-eg-ie
      - id: cleveref-capitalization
      - id: consistent-spelling
        args:
          - --emph=both
      - id: csquotes
      # - id: ensure-labels-for-sections  # Disabled: Beamer sections don't always need labels
      - id: no-space-in-cite
      # - id: tilde-cite  # Disabled: Not always needed in Beamer presentations
      - id: unique-labels

  # Git commit message checks
  - repo: https://github.com/jorisroovers/gitlint
    rev: v0.19.1
    hooks:
      - id: gitlint
        stages: [commit-msg]

# Exclude common LaTeX auxiliary files
exclude: |
  (?x)^(
    .*\.aux|
    .*\.bbl|
    .*\.bcf|
    .*\.blg|
    .*\.fdb_latexmk|
    .*\.fls|
    .*\.log|
    .*\.nav|
    .*\.out|
    .*\.run\.xml|
    .*\.snm|
    .*\.synctex\.gz|
    .*\.toc|
    .*\.pdf
  )$
